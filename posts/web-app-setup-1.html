<!DOCTYPE html><html><head><meta name="viewport" content="width=device-width"/><meta charSet="utf-8"/><link rel="icon" href="/favicon.ico"/><meta name="description" content="Francis Tao-Jinjin Next.js GitHub Pages"/><meta property="og:image" content="https://og-image.now.sh/Francis%20Tao-Jinjin%20Next.js%20GitHub%20Pages.png?theme=light&amp;md=0&amp;fontSize=75px&amp;images=https%3A%2F%2Fassets.vercel.com%2Fimage%2Fupload%2Ffront%2Fassets%2Fdesign%2Fnextjs-black-logo.svg"/><meta name="og:title" content="Francis Tao-Jinjin Next.js GitHub Pages"/><meta name="teitter:card" content="summary_large_image"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/styles/default.min.css"/><title>WebApp setup from scratch</title><meta name="next-head-count" content="9"/><link rel="preload" href="/_next/static/css/0b85c6cb7a4f074d594e.css" as="style"/><link rel="stylesheet" href="/_next/static/css/0b85c6cb7a4f074d594e.css" data-n-g=""/><link rel="preload" href="/_next/static/css/ca491a2f2dad37bc344d.css" as="style"/><link rel="stylesheet" href="/_next/static/css/ca491a2f2dad37bc344d.css" data-n-p=""/><noscript data-n-css=""></noscript><link rel="preload" href="/_next/static/chunks/main-83e64d9f15f816d3a120.js" as="script"/><link rel="preload" href="/_next/static/chunks/webpack-50bee04d1dc61f8adf5b.js" as="script"/><link rel="preload" href="/_next/static/chunks/framework.9d524150d48315f49e80.js" as="script"/><link rel="preload" href="/_next/static/chunks/commons.ff0a5790a80e83d7223b.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/_app-33a07a74d438077bd505.js" as="script"/><link rel="preload" href="/_next/static/chunks/df27990eef8845831ef4a3353c0adb327953b68f.b37cb412c978ebbef724.js" as="script"/><link rel="preload" href="/_next/static/chunks/7989c093b81d86ddb0abfb342d5bc2e84730435d.a80097bea88316e5b19e.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/posts/%5Bid%5D-ca1064a356451419629c.js" as="script"/></head><body><div id="__next"><div class="layout_container__2t4v2"><header class="layout_header__2rhWq"><a href="/"><img src="/images/profile.png" class="layout_headerImage__2h5On utils_borderCircle__13qdJ" alt="Francis Tao"/></a><h2 class="utils_headingLg__de7p0"><a class="utils_colorInherit__3Gudf" href="/">Francis Tao</a></h2></header><article><h1 class="utils_headingXl__1XecN">WebApp setup from scratch</h1><div class="utils_lightText__12Ckm"><time dateTime="2019-07-23">July 23, 2019</time></div><div><h1 class="text-3xl font-medium mb-2 mt-3">How to setup a web application project on your own?</h1>
<p>The repo of this blog is at <a class='text-blue-500' href="https://github.com/Francis-Tao-jinjin/web-app-setup/tree/stage-1">web-app-setup-stage-1</a>. You may want to read this article while reading the code.</p>
<div class='m-5'></div>
<p>When you Google how to create a react app, almost all the results you find will say, create a react app with ‘create-react-app’, and this is pretty much the same for angularjs and vuejs.</p>
<div class='m-5'></div>
<p>I find this situation is hard to say. I don’t mean to say that these tools are bad, but on the contrary, create-react-app can save a lot of valuable time for someone who wants to quickly learn how to use Reactjs.</p>
<div class='m-5'></div>
<p>But in the real world of development, I believe very few people are using create-react-app to build their company’s web applications. When you need to develop a complex project that integrates database, server and front-end, create-react-app feels like a toy.</p>
<div class='m-5'></div>
<p>In addition to this reason, it is also important for developers to have a general understanding of how the application is built. Otherwise, according to this trend, it is not surprising that a front-end developer end up only know html-related stuff.</p>
<div class='m-5'></div>
<p>Back to the point, let’s start thinking how to setup a web application project.</p>
<div class='m-5'></div>
<p>Simply put, a web application requires a server and a client, we can design the server to be very simple, for example, all it does is to return the html page and js and css file when user make a request. In this case, the server is written in nodejs, and the front end code is using React. In order to build React app, we also need webpack as build tool.</p>
<div class='m-5'></div>
<p>Let’s get started.</p>
<div class='m-5'></div>
<p>1 . Create a folder and excute <code>npm init</code>, then create src folder.</p>
<p>2 . Inside ‘src’ folder, create ‘app’ folder and ‘bin’ folder. The ‘app’ folder will conatin all the code of frontend and the server. ‘bin’ folder will contain all the code that relate to build process.</p>
<p>Next, we are going to write our build tool and create a simple frontend entry file.</p>
<p>3 . install package, here are the packages we need at this step:</p>
<div class='preCodeBlock'></div>
<pre><code class="language-json">&quot;@types/fs-extra&quot;: &quot;^9.0.6&quot;,
&quot;@types/node&quot;: &quot;^10.14.6&quot;,
&quot;@types/react&quot;: &quot;^17.0.0&quot;,
&quot;@types/react-dom&quot;: &quot;^17.0.0&quot;,
&quot;autoprefixer&quot;: &quot;^9.8.6&quot;,
&quot;css-loader&quot;: &quot;^5.0.1&quot;,
&quot;dotenv&quot;: &quot;^8.2.0&quot;,
&quot;fs-extra&quot;: &quot;^9.1.0&quot;,
&quot;postcss&quot;: &quot;^7.0.35&quot;,
&quot;mini-css-extract-plugin&quot;: &quot;^0.8.0&quot;,
&quot;postcss-color-function&quot;: &quot;^4.0.1&quot;,
&quot;postcss-loader&quot;: &quot;^3.0.0&quot;,
&quot;postcss-modules-values&quot;: &quot;^3.0.0&quot;,
&quot;postcss-px-to-viewport&quot;: &quot;^0.0.3&quot;,
&quot;react&quot;: &quot;17.0.1&quot;,
&quot;react-dom&quot;: &quot;17.0.1&quot;,
&quot;style-loader&quot;: &quot;^2.0.0&quot;,
&quot;ts-loader&quot;: &quot;^8.0.15&quot;,
&quot;ts-node&quot;: &quot;^6.2.0&quot;,
&quot;typescript&quot;: &quot;~3.7.2&quot;,
&quot;webpack&quot;: &quot;4.42.1&quot;,
</code></pre>
<p>A short description, I write down the version of these package because packages like ‘webpack’, ‘postcss-loader’ and ‘css-loader’ need be some specific version to be compatible with each other. If you upgrade webpack or postcss-loader to the latest version, you will always find one or the other problem when you build the project. This situation is really terrible, which is why I think it’s important to be able to create your own projects. Because you will know the details of each step are, and thus ensure the overall stability.</p>
<p>We have webpack installed, but not webpack-cli, because we will use our own nodejs script to call webapck to compile and package the app. You may wonder why we do this, because in practice we may want to perform some additional tasks before the code is compiled, or we may want to make additional changes to the compilation results during the webpack compilation process, in short, webpack may be only part of the compilation and packaging process, but not the whole thing. (Later, when we use IPFS in a project, IPFS will be greatly involved in the process of code compilation.)</p>
<p>under ‘/src/bin’ folder, create this files:</p>
<div class='preCodeBlock'></div>
<pre><code>bin
├── watch.ts
└── utils
    ├── paths.ts
    ├── watch-webpack.js
    ├── webpack-args.ts
    └── webpack.js
</code></pre>
<p>Now let’s talk about the role of each file.</p>
<p>1 . <code>bin/watch.ts</code> is the entry file when we excute <code>npm run watch</code>, it takes the arguments we pass in from the command line, generates the webpack config with those arguments, and spawns a child-process to run <code>/bin/utils/watch-webpack.js</code>.</p>
<p>2 . <code>bin/utils/paths.ts</code> export the path name of directory such as ‘build’, ‘public’.</p>
<p>3 . <code>bin/utils/webpack-args.ts</code> define the entryPoints of frontend code and environment info :</p>
<div class='preCodeBlock'></div>
<pre><code class="language-typescript"><span class="hljs-keyword">export</span> <span class="hljs-keyword">const</span> WEBPACK_CONFIG = {
    <span class="hljs-string">&#x27;all&#x27;</span>: [{
            <span class="hljs-attr">env</span>: <span class="hljs-string">&#x27;development&#x27;</span>,
            <span class="hljs-attr">entryPoints</span>: { <span class="hljs-attr">app</span>: <span class="hljs-string">&#x27;./src/app/start-client.ts&#x27;</span> },
        },
        {
            <span class="hljs-attr">env</span>: <span class="hljs-string">&#x27;production&#x27;</span>,
            <span class="hljs-attr">entryPoints</span>: { <span class="hljs-attr">app</span>: <span class="hljs-string">&#x27;./src/app/start-client.ts&#x27;</span> },
    }],
    <span class="hljs-string">&#x27;dev&#x27;</span>: [{
            <span class="hljs-attr">env</span>: <span class="hljs-string">&#x27;development&#x27;</span>,
            <span class="hljs-attr">entryPoints</span>: { <span class="hljs-attr">app</span>: <span class="hljs-string">&#x27;./src/app/start-client.ts&#x27;</span> },
    }],
    <span class="hljs-string">&#x27;prod&#x27;</span>: [{
            <span class="hljs-attr">env</span>: <span class="hljs-string">&#x27;production&#x27;</span>,
            <span class="hljs-attr">entryPoints</span>: { <span class="hljs-attr">app</span>: <span class="hljs-string">&#x27;./src/app/start-client.ts&#x27;</span> },
    }],
};
</code></pre>
<p>4 . <code>bin/utils/webpackpack.js</code> responsible for generating the webpack config object and exporting the functions that call webpack(configs).watch,</p>
<p>5 . <code>bin/utils/watch-webpack.js</code> call the watch function which exported from ‘bin/utils/webpackpack.js’.</p>
</div></article><div class="layout_backToHome__1vZsp"><a href="/">← Back to home</a></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"postData":{"id":"web-app-setup-1","contentHtml":"\u003ch1 class=\"text-3xl font-medium mb-2 mt-3\"\u003eHow to setup a web application project on your own?\u003c/h1\u003e\n\u003cp\u003eThe repo of this blog is at \u003ca class='text-blue-500' href=\"https://github.com/Francis-Tao-jinjin/web-app-setup/tree/stage-1\"\u003eweb-app-setup-stage-1\u003c/a\u003e. You may want to read this article while reading the code.\u003c/p\u003e\n\u003cdiv class='m-5'\u003e\u003c/div\u003e\n\u003cp\u003eWhen you Google how to create a react app, almost all the results you find will say, create a react app with ‘create-react-app’, and this is pretty much the same for angularjs and vuejs.\u003c/p\u003e\n\u003cdiv class='m-5'\u003e\u003c/div\u003e\n\u003cp\u003eI find this situation is hard to say. I don’t mean to say that these tools are bad, but on the contrary, create-react-app can save a lot of valuable time for someone who wants to quickly learn how to use Reactjs.\u003c/p\u003e\n\u003cdiv class='m-5'\u003e\u003c/div\u003e\n\u003cp\u003eBut in the real world of development, I believe very few people are using create-react-app to build their company’s web applications. When you need to develop a complex project that integrates database, server and front-end, create-react-app feels like a toy.\u003c/p\u003e\n\u003cdiv class='m-5'\u003e\u003c/div\u003e\n\u003cp\u003eIn addition to this reason, it is also important for developers to have a general understanding of how the application is built. Otherwise, according to this trend, it is not surprising that a front-end developer end up only know html-related stuff.\u003c/p\u003e\n\u003cdiv class='m-5'\u003e\u003c/div\u003e\n\u003cp\u003eBack to the point, let’s start thinking how to setup a web application project.\u003c/p\u003e\n\u003cdiv class='m-5'\u003e\u003c/div\u003e\n\u003cp\u003eSimply put, a web application requires a server and a client, we can design the server to be very simple, for example, all it does is to return the html page and js and css file when user make a request. In this case, the server is written in nodejs, and the front end code is using React. In order to build React app, we also need webpack as build tool.\u003c/p\u003e\n\u003cdiv class='m-5'\u003e\u003c/div\u003e\n\u003cp\u003eLet’s get started.\u003c/p\u003e\n\u003cdiv class='m-5'\u003e\u003c/div\u003e\n\u003cp\u003e1 . Create a folder and excute \u003ccode\u003enpm init\u003c/code\u003e, then create src folder.\u003c/p\u003e\n\u003cp\u003e2 . Inside ‘src’ folder, create ‘app’ folder and ‘bin’ folder. The ‘app’ folder will conatin all the code of frontend and the server. ‘bin’ folder will contain all the code that relate to build process.\u003c/p\u003e\n\u003cp\u003eNext, we are going to write our build tool and create a simple frontend entry file.\u003c/p\u003e\n\u003cp\u003e3 . install package, here are the packages we need at this step:\u003c/p\u003e\n\u003cdiv class='preCodeBlock'\u003e\u003c/div\u003e\n\u003cpre\u003e\u003ccode class=\"language-json\"\u003e\u0026quot;@types/fs-extra\u0026quot;: \u0026quot;^9.0.6\u0026quot;,\n\u0026quot;@types/node\u0026quot;: \u0026quot;^10.14.6\u0026quot;,\n\u0026quot;@types/react\u0026quot;: \u0026quot;^17.0.0\u0026quot;,\n\u0026quot;@types/react-dom\u0026quot;: \u0026quot;^17.0.0\u0026quot;,\n\u0026quot;autoprefixer\u0026quot;: \u0026quot;^9.8.6\u0026quot;,\n\u0026quot;css-loader\u0026quot;: \u0026quot;^5.0.1\u0026quot;,\n\u0026quot;dotenv\u0026quot;: \u0026quot;^8.2.0\u0026quot;,\n\u0026quot;fs-extra\u0026quot;: \u0026quot;^9.1.0\u0026quot;,\n\u0026quot;postcss\u0026quot;: \u0026quot;^7.0.35\u0026quot;,\n\u0026quot;mini-css-extract-plugin\u0026quot;: \u0026quot;^0.8.0\u0026quot;,\n\u0026quot;postcss-color-function\u0026quot;: \u0026quot;^4.0.1\u0026quot;,\n\u0026quot;postcss-loader\u0026quot;: \u0026quot;^3.0.0\u0026quot;,\n\u0026quot;postcss-modules-values\u0026quot;: \u0026quot;^3.0.0\u0026quot;,\n\u0026quot;postcss-px-to-viewport\u0026quot;: \u0026quot;^0.0.3\u0026quot;,\n\u0026quot;react\u0026quot;: \u0026quot;17.0.1\u0026quot;,\n\u0026quot;react-dom\u0026quot;: \u0026quot;17.0.1\u0026quot;,\n\u0026quot;style-loader\u0026quot;: \u0026quot;^2.0.0\u0026quot;,\n\u0026quot;ts-loader\u0026quot;: \u0026quot;^8.0.15\u0026quot;,\n\u0026quot;ts-node\u0026quot;: \u0026quot;^6.2.0\u0026quot;,\n\u0026quot;typescript\u0026quot;: \u0026quot;~3.7.2\u0026quot;,\n\u0026quot;webpack\u0026quot;: \u0026quot;4.42.1\u0026quot;,\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eA short description, I write down the version of these package because packages like ‘webpack’, ‘postcss-loader’ and ‘css-loader’ need be some specific version to be compatible with each other. If you upgrade webpack or postcss-loader to the latest version, you will always find one or the other problem when you build the project. This situation is really terrible, which is why I think it’s important to be able to create your own projects. Because you will know the details of each step are, and thus ensure the overall stability.\u003c/p\u003e\n\u003cp\u003eWe have webpack installed, but not webpack-cli, because we will use our own nodejs script to call webapck to compile and package the app. You may wonder why we do this, because in practice we may want to perform some additional tasks before the code is compiled, or we may want to make additional changes to the compilation results during the webpack compilation process, in short, webpack may be only part of the compilation and packaging process, but not the whole thing. (Later, when we use IPFS in a project, IPFS will be greatly involved in the process of code compilation.)\u003c/p\u003e\n\u003cp\u003eunder ‘/src/bin’ folder, create this files:\u003c/p\u003e\n\u003cdiv class='preCodeBlock'\u003e\u003c/div\u003e\n\u003cpre\u003e\u003ccode\u003ebin\n├── watch.ts\n└── utils\n    ├── paths.ts\n    ├── watch-webpack.js\n    ├── webpack-args.ts\n    └── webpack.js\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eNow let’s talk about the role of each file.\u003c/p\u003e\n\u003cp\u003e1 . \u003ccode\u003ebin/watch.ts\u003c/code\u003e is the entry file when we excute \u003ccode\u003enpm run watch\u003c/code\u003e, it takes the arguments we pass in from the command line, generates the webpack config with those arguments, and spawns a child-process to run \u003ccode\u003e/bin/utils/watch-webpack.js\u003c/code\u003e.\u003c/p\u003e\n\u003cp\u003e2 . \u003ccode\u003ebin/utils/paths.ts\u003c/code\u003e export the path name of directory such as ‘build’, ‘public’.\u003c/p\u003e\n\u003cp\u003e3 . \u003ccode\u003ebin/utils/webpack-args.ts\u003c/code\u003e define the entryPoints of frontend code and environment info :\u003c/p\u003e\n\u003cdiv class='preCodeBlock'\u003e\u003c/div\u003e\n\u003cpre\u003e\u003ccode class=\"language-typescript\"\u003e\u003cspan class=\"hljs-keyword\"\u003eexport\u003c/span\u003e \u003cspan class=\"hljs-keyword\"\u003econst\u003c/span\u003e WEBPACK_CONFIG = {\n    \u003cspan class=\"hljs-string\"\u003e\u0026#x27;all\u0026#x27;\u003c/span\u003e: [{\n            \u003cspan class=\"hljs-attr\"\u003eenv\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\u0026#x27;development\u0026#x27;\u003c/span\u003e,\n            \u003cspan class=\"hljs-attr\"\u003eentryPoints\u003c/span\u003e: { \u003cspan class=\"hljs-attr\"\u003eapp\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\u0026#x27;./src/app/start-client.ts\u0026#x27;\u003c/span\u003e },\n        },\n        {\n            \u003cspan class=\"hljs-attr\"\u003eenv\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\u0026#x27;production\u0026#x27;\u003c/span\u003e,\n            \u003cspan class=\"hljs-attr\"\u003eentryPoints\u003c/span\u003e: { \u003cspan class=\"hljs-attr\"\u003eapp\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\u0026#x27;./src/app/start-client.ts\u0026#x27;\u003c/span\u003e },\n    }],\n    \u003cspan class=\"hljs-string\"\u003e\u0026#x27;dev\u0026#x27;\u003c/span\u003e: [{\n            \u003cspan class=\"hljs-attr\"\u003eenv\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\u0026#x27;development\u0026#x27;\u003c/span\u003e,\n            \u003cspan class=\"hljs-attr\"\u003eentryPoints\u003c/span\u003e: { \u003cspan class=\"hljs-attr\"\u003eapp\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\u0026#x27;./src/app/start-client.ts\u0026#x27;\u003c/span\u003e },\n    }],\n    \u003cspan class=\"hljs-string\"\u003e\u0026#x27;prod\u0026#x27;\u003c/span\u003e: [{\n            \u003cspan class=\"hljs-attr\"\u003eenv\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\u0026#x27;production\u0026#x27;\u003c/span\u003e,\n            \u003cspan class=\"hljs-attr\"\u003eentryPoints\u003c/span\u003e: { \u003cspan class=\"hljs-attr\"\u003eapp\u003c/span\u003e: \u003cspan class=\"hljs-string\"\u003e\u0026#x27;./src/app/start-client.ts\u0026#x27;\u003c/span\u003e },\n    }],\n};\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e4 . \u003ccode\u003ebin/utils/webpackpack.js\u003c/code\u003e responsible for generating the webpack config object and exporting the functions that call webpack(configs).watch,\u003c/p\u003e\n\u003cp\u003e5 . \u003ccode\u003ebin/utils/watch-webpack.js\u003c/code\u003e call the watch function which exported from ‘bin/utils/webpackpack.js’.\u003c/p\u003e\n","title":"WebApp setup from scratch","pic":"/images/web-app-setup-1/1.png","keyword":"React, Webpack, Nodejs","description":"Setup a web application from scratch without using create-react-app and webpack-cli. With CSS configuration so that the Tailwind can coexist with css module.","date":"2019-07-23"}},"__N_SSG":true},"page":"/posts/[id]","query":{"id":"web-app-setup-1"},"buildId":"cidN31CupVbg8zgaW_WFD","nextExport":false,"isFallback":false,"gsp":true}</script><script nomodule="" src="/_next/static/chunks/polyfills-ff94e68042added27a93.js"></script><script src="/_next/static/chunks/main-83e64d9f15f816d3a120.js" async=""></script><script src="/_next/static/chunks/webpack-50bee04d1dc61f8adf5b.js" async=""></script><script src="/_next/static/chunks/framework.9d524150d48315f49e80.js" async=""></script><script src="/_next/static/chunks/commons.ff0a5790a80e83d7223b.js" async=""></script><script src="/_next/static/chunks/pages/_app-33a07a74d438077bd505.js" async=""></script><script src="/_next/static/chunks/df27990eef8845831ef4a3353c0adb327953b68f.b37cb412c978ebbef724.js" async=""></script><script src="/_next/static/chunks/7989c093b81d86ddb0abfb342d5bc2e84730435d.a80097bea88316e5b19e.js" async=""></script><script src="/_next/static/chunks/pages/posts/%5Bid%5D-ca1064a356451419629c.js" async=""></script><script src="/_next/static/cidN31CupVbg8zgaW_WFD/_buildManifest.js" async=""></script><script src="/_next/static/cidN31CupVbg8zgaW_WFD/_ssgManifest.js" async=""></script></body></html>